<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      th:include="layout/base :: page">

    <th:block th:fragment="title">Permissão de pvs</th:block>

	<th:block th:fragment="content">
	    <div class="row">
            <div class="col s3">
    	        <form method="get" th:action="@{/pv-permissions}">
    	          <div class="input-field row">
    	            <input id="pv-code" name="code" th:value="${code}" type="text" />
    	            <label for="pv-code">número do estabelecimento (PV)</label>
    	          </div>
    	          <div class="input-field row">
    	            <input id="email" name="email" type="text" th:value="${email}" />
    	            <label for="email">e-mail de acesso</label>
    	          </div>
    	          <div class="input-field row">
    	            <select id="acquirer" name="acquirer">
    	              <option th:selected="${acquirer == acquirerItem}"
    	                th:each="acquirerItem: ${acquirers}"
    	                th:text="#{'option.acquirer.' + ${acquirerItem}}"
    	                th:value="${acquirerItem}"></option>
    	            </select>
    	            <label for="acquirer">adquirente</label>
    	          </div>
    	          <div class="input-field row">
    	            <button class="btn waves-effect waves-light" type="submit">buscar</button>
    	          </div>
    	        </form>
            </div>
	      <div class="col s9">
	        <p th:unless="${pvPermissions.totalPages > 0}">nenhum resultado encontrado</p>
	        <table class="striped" th:unless="${pvPermissions.totalPages == 0}">
	          <thead>
	            <tr>
	              <th>e-mail</th>
	              <th>adquirente</th>
	              <th>código do PV</th>
	              <th></th>
	            </tr>
	          </thead>
	          <tbody>
	            <tr th:each="permission : ${pvPermissions}">
	              <td th:text="${permission.user.email}"></td>
	              <td th:text="#{'option.acquirer.' + ${permission.pv.acquirer}}"></td>
	              <td th:text="${permission.pv.code}"></td>
	              <td><div th:if="${permission.pv.isHeadquarter()}" class="chip">matriz</div></td>
	            </tr>
	          </tbody>
	        </table>
	        <ul class="pagination center" th:unless="${pvPermissions.totalPages == 0}">
	          <li th:class="${pvPermissions.isFirst()} ? 'disabled' : 'waves-effect'">
	            <a th:href="${pvPermissions.isFirst()} ? 'javascript:void(0);' : @{${'/'}(page=${pvPermissions.number-1}, size=${pvPermissions.size}, code=${code}, acquirer=${acquirer})}" class="material-icons">chevron_left</a>
	          </li>
	          <li th:each="pageNo : ${#numbers.sequence(0, pvPermissions.totalPages - 1)}" th:class="${pvPermissions.number eq pageNo} ? 'active' : 'waves-effect'">
	            <a th:href="@{${'/'}(page=${pageNo}, size=${pvPermissions.size}, code=${code}, acquirer=${acquirer})}">
	              <span th:text="${pageNo+1}"></span>
	            </a>
	          </li>
	          <li th:class="${pvPermissions.isLast()} ? 'disabled' : 'waves-effect'">
	            <a th:href="${pvPermissions.isLast()} ? 'javascript:void(0);' : @{${'/'}(page=${pvPermissions.number+1}, size=${pvPermissions.size}, code=${code}, acquirer=${acquirer})}" class="material-icons">chevron_right</a>
	          </li>
	        </ul>
	      </div>
	    </div>
	</th:block>
</html>
